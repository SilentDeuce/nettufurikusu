<center><h3><a href="javascript:(function()%7Bvar%20clq%20%3D%20document.location.href.split(%22%3A%22)%5B3%5D%0Avar%20knpJsonLink%20%3D%20%22https%3A%2F%2Foriginator.backlot.netflix.com%2Fapi%2Fknp%2Fclq%3Aorigination%3A%22%2Bclq%0Avar%20LANG%20%3D%20%22zh-CN%22%0A%0Avar%20getJSON%20%3D%20async%20url%20%3D%3E%20%7B%0A%20%20try%20%7B%0A%20%20%20%20const%20response%20%3D%20await%20fetch(url)%3B%0A%20%20%20%20if(!response.ok)%0A%20%20%20%20%20%20%20%20throw%20new%20Error(response.statusText)%3B%0A%20%20%20%20const%20data%20%3D%20await%20response.json()%3B%20%0A%20%20%20%20return%20data%3B%0A%20%20%7D%20catch(error)%20%7B%0A%20%20%20%20return%20error%3B%0A%20%20%7D%0A%7D%0A%0Afunction%20srtName(suffix%20%3D%20%22%22)%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20var%20s%20%3D%20document.getElementsByClassName(%22cpe-page-menu-label%22)%5B0%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20.innerText%0A%20%20%20%20%20%20%20%20%20%20%20var%20srtName%20%3D%20(s.replace(%2F%5B%20%5D%2Fg%2C%20'_').replace(%2F%5B%5Ea-z0-9_%5D%2Fgi%2C%20'')%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20suffix%20%2B%20%22.csv%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20.trim()%0A%20%20%20%20%20%20%20%20%20%20%20if(!srtName)%20srtName%20%3D%20clq%20%2B%20%22_%22%20%2B%20suffix%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22.csv%22%0A%20%20%20%20%20%20%20%20%20%20%20return%20srtName%0A%20%20%20%20%20%20%20%20%7D%0Avar%20csvName%20%3D%20srtName()%0A%0Afunction%20denull(value)%20%7B%20%20if(!value)%20%7Breturn%20%22%22%7D%20else%20%7Breturn%20value.trim()%7D%20%20%7D%0A%0Avar%20majorEntities%20%3D%20%5B%22PERSON%22%2C%20%22LOCATION%22%2C%20%22ORGANIZATION%22%2C%20%22PHRASE%22%5D%0A%0Afunction%20arrayToCsv(data)%7B%0A%20%20return%20data.map(row%20%3D%3E%20row%0A%20%20%20%20.map(String)%20%20%2F%2F%20convert%20every%20value%20to%20String%0A%20%20%20%20.map(v%20%3D%3E%20v.replaceAll('%22'%2C%20'%22%22'))%20%20%2F%2F%20escape%20double%20colons%0A%20%20%20%20.map(v%20%3D%3E%20%60%22%24%7Bv%7D%22%60)%20%20%2F%2F%20quote%20it%0A%20%20%20%20.join('%2C')%20%20%2F%2F%20comma-separated%0A%20%20).join('%5Cr%5Cn')%3B%20%20%2F%2F%20rows%20starting%20on%20new%20lines%0A%7D%0A%0Avar%20oKnp%20%3D%20%7B%7D%0Avar%20finalArray%20%3D%20%5B%5D%0Avar%20header_2%20%3D%20%5B%20%22TYPE%22%2C%20%22TEMPLATE%20(EN)%22%2C%20%22NOTE%22%2C%20%22TARGET%20(%22%2BLANG%2B%22)%22%2C%20%22NOTE%20(%22%2BLANG%2B%22)%22%20%5D%0Avar%20header_3%20%3D%20%5B%20%22TYPE%22%2C%20%22ORIGINAL%22%2C%20%22TEMPLATE%20(EN)%22%2C%20%22NOTE%20(EN)%22%2C%20%22TARGET%20(%22%2BLANG%2B%22)%22%2C%20%22NOTE%20(%22%2BLANG%2B%22)%22%20%5D%0Avar%20tmpArray%20%3D%20%5B%5D%0AgetJSON(knpJsonLink).then(data%20%3D%3E%20%7B%0A%0AoKnp%20%3D%20data%0Aif(oKnp.srcLocale%20%3D%3D%20%22en%22)%20%7B%0AfinalArray.push(header_2)%0Afor(const%20Entity%20of%20majorEntities)%0A%09%7B%0Aif(%20typeof%20oKnp.mapKnpTermDTOs%5BEntity%5D%20!%3D%3D%20%22undefined%22%20)%20%7B%0AoKnp.mapKnpTermDTOs%5BEntity%5D.forEach((v)%3D%3E%7B%0AtmpArray.push(v.type%2C%20denull(v.srcValue.value)%2C%20denull(v.srcValue.note)%2C%20denull(v.localizedValues%5BLANG%5D.value)%2C%20denull(v.localizedValues%5BLANG%5D.note))%0AfinalArray.push(tmpArray)%3B%20tmpArray%20%3D%20%5B%5D%3B%0A%7D)%0A%7D%0A%09%7D%0A%0AoKnp.titleDTOs.forEach((t)%3D%3E%7B%0Atry%20%7BtmpArray.push(t.type%2C%20t.srcValue.value%2C%20t.srcValue.note%2Ct.localizedValues%5BLANG%5D.value%2Ct.localizedValues%5BLANG%5D.note)%0AfinalArray.push(tmpArray)%3B%20tmpArray%20%3D%20%5B%5D%3B%7D%20catch(e)%7B%7D%0A%7D)%0A%0A%7D%20else%20%7B%0A%09var%20LANG_SRC%20%3D%20oKnp.srcLocale%0A%09finalArray.push(header_3)%0A%09for(const%20Entity%20of%20majorEntities)%0A%09%7B%0A%0A%09oKnp.mapKnpTermDTOs%5BEntity%5D.forEach((v)%3D%3E%7B%0A%0A%20%20%20%20try%20%7B%0A%09tmpArray.push(v.type%2C%20denull(v.srcValue.value)%2C%20denull(v.localizedValues%5B%22en%22%5D.value)%2C%20denull(v.localizedValues%5B%22en%22%5D.note)%2C%20denull(v.localizedValues%5BLANG%5D.value)%2C%20denull(v.localizedValues%5BLANG%5D.note))%0A%09finalArray.push(tmpArray)%3B%20tmpArray%20%3D%20%5B%5D%3B%7Dcatch(e)%7B%7D%0A%7D)%0A%0A%09%7D%0A%0A%09oKnp.titleDTOs.forEach((t)%3D%3E%7B%0A%09%09try%7B%0A%09tmpArray.push(t.type%2C%20denull(t.srcValue.value)%2C%20denull(t.localizedValues%5B%22en%22%5D.value)%2Cdenull(t.localizedValues%5B%22en%22%5D.note)%2Cdenull(t.localizedValues%5BLANG%5D.value)%2Cdenull(t.localizedValues%5BLANG%5D.note))%0A%09finalArray.push(tmpArray)%3B%20tmpArray%20%3D%20%5B%5D%3B%7Dcatch(e)%7B%7D%0A%09%7D)%0A%0A%0A%7D%0Alet%20csv%20%3D%20arrayToCsv(finalArray)%0Avar%20universalBOM%20%3D%20%22%5CuFEFF%22%3B%0Avar%20a%20%3D%20window.document.createElement('a')%3B%0Aa.setAttribute('href'%2C%20'data%3Atext%2Fcsv%3B%20charset%3Dutf-8%2C'%20%2B%20encodeURIComponent(universalBOM%2Bcsv))%3B%0Aa.setAttribute('download'%2C%20csvName)%3B%0Awindow.document.body.appendChild(a)%3B%0Aa.click()%3B%0A%7D).catch(error%20%3D%3E%20%7B%0A%20%20console.error(error)%3B%0A%7D)%3B%7D)()%3B">Knp2Csv</a>
  
  
  Source:
  </center><br><hr>
  <pre>  
var clq = document.location.href.split(":")[3]
var knpJsonLink = "https://originator.backlot.netflix.com/api/knp/clq:origination:"+clq
var LANG = "zh-CN"

var getJSON = async url => {
  try {
    const response = await fetch(url);
    if(!response.ok)
        throw new Error(response.statusText);
    const data = await response.json(); 
    return data;
  } catch(error) {
    return error;
  }
}

function srtName(suffix = "")
        {
           var s = document.getElementsByClassName("cpe-page-menu-label")[0]
              .innerText
           var srtName = (s.replace(/[ ]/g, '_').replace(/[^a-z0-9_]/gi, '') +
                 suffix + ".csv"
                 )
              .trim()
           if(!srtName) srtName = clq + "_" + suffix +
              ".csv"
           return srtName
        }
var csvName = srtName()

function denull(value) {  if(!value) {return ""} else {return value.trim()}  }

var majorEntities = ["PERSON", "LOCATION", "ORGANIZATION", "PHRASE"]

function arrayToCsv(data){
  return data.map(row => row
    .map(String)  // convert every value to String
    .map(v => v.replaceAll('"', '""'))  // escape double colons
    .map(v => `"${v}"`)  // quote it
    .join(',')  // comma-separated
  ).join('\r\n');  // rows starting on new lines
}

var oKnp = {}
var finalArray = []
var header_2 = [ "TYPE", "TEMPLATE (EN)", "NOTE", "TARGET ("+LANG+")", "NOTE ("+LANG+")" ]
var header_3 = [ "TYPE", "ORIGINAL", "TEMPLATE (EN)", "NOTE (EN)", "TARGET ("+LANG+")", "NOTE ("+LANG+")" ]
var tmpArray = []
getJSON(knpJsonLink).then(data => {

oKnp = data
if(oKnp.srcLocale == "en") {
finalArray.push(header_2)
for(const Entity of majorEntities)
	{
if( typeof oKnp.mapKnpTermDTOs[Entity] !== "undefined" ) {
oKnp.mapKnpTermDTOs[Entity].forEach((v)=>{
tmpArray.push(v.type, denull(v.srcValue.value), denull(v.srcValue.note), denull(v.localizedValues[LANG].value), denull(v.localizedValues[LANG].note))
finalArray.push(tmpArray); tmpArray = [];
})
}
	}

oKnp.titleDTOs.forEach((t)=>{
try {tmpArray.push(t.type, t.srcValue.value, t.srcValue.note,t.localizedValues[LANG].value,t.localizedValues[LANG].note)
finalArray.push(tmpArray); tmpArray = [];} catch(e){}
})

} else {
	var LANG_SRC = oKnp.srcLocale
	finalArray.push(header_3)
	for(const Entity of majorEntities)
	{

	oKnp.mapKnpTermDTOs[Entity].forEach((v)=>{

    try {
	tmpArray.push(v.type, denull(v.srcValue.value), denull(v.localizedValues["en"].value), denull(v.localizedValues["en"].note), denull(v.localizedValues[LANG].value), denull(v.localizedValues[LANG].note))
	finalArray.push(tmpArray); tmpArray = [];}catch(e){}
})

	}

	oKnp.titleDTOs.forEach((t)=>{
		try{
	tmpArray.push(t.type, denull(t.srcValue.value), denull(t.localizedValues["en"].value),denull(t.localizedValues["en"].note),denull(t.localizedValues[LANG].value),denull(t.localizedValues[LANG].note))
	finalArray.push(tmpArray); tmpArray = [];}catch(e){}
	})


}
let csv = arrayToCsv(finalArray)
var universalBOM = "\uFEFF";
var a = window.document.createElement('a');
a.setAttribute('href', 'data:text/csv; charset=utf-8,' + encodeURIComponent(universalBOM+csv));
a.setAttribute('download', csvName);
window.document.body.appendChild(a);
a.click();
}).catch(error => {
  console.error(error);
});



